var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gr(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var V={exports:{}},J={},Ye;function yr(){return Ye||(Ye=1,y.crypto&&y.crypto.getRandomValues?J.randomBytes=function(s){var e=new Uint8Array(s);return y.crypto.getRandomValues(e),e}:J.randomBytes=function(s){for(var e=new Array(s),t=0;t<s;t++)e[t]=Math.floor(Math.random()*256);return e}),J}var Z,et;function X(){if(et)return Z;et=1;var s=yr(),e="abcdefghijklmnopqrstuvwxyz012345";return Z={string:function(t){for(var r=e.length,n=s.randomBytes(t),i=[],o=0;o<t;o++)i.push(e.substr(n[o]%r,1));return i.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var r=(""+(t-1)).length,n=new Array(r+1).join("0");return(n+this.number(t)).slice(-r)}},Z}var tt;function L(){return tt||(tt=1,(function(s){var e=X(),t={},r=!1,n=y.chrome&&y.chrome.app&&y.chrome.app.runtime;s.exports={attachEvent:function(o,a){typeof y.addEventListener<"u"?y.addEventListener(o,a,!1):y.document&&y.attachEvent&&(y.document.attachEvent("on"+o,a),y.attachEvent("on"+o,a))},detachEvent:function(o,a){typeof y.addEventListener<"u"?y.removeEventListener(o,a,!1):y.document&&y.detachEvent&&(y.document.detachEvent("on"+o,a),y.detachEvent("on"+o,a))},unloadAdd:function(o){if(n)return null;var a=e.string(8);return t[a]=o,r&&setTimeout(this.triggerUnloadCallbacks,0),a},unloadDel:function(o){o in t&&delete t[o]},triggerUnloadCallbacks:function(){for(var o in t)t[o](),delete t[o]}};var i=function(){r||(r=!0,s.exports.triggerUnloadCallbacks())};n||s.exports.attachEvent("unload",i)})(V)),V.exports}var K,rt;function br(){return rt||(rt=1,K=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}),K}var $={},nt;function wr(){if(nt)return $;nt=1;var s=Object.prototype.hasOwnProperty,e;function t(o){try{return decodeURIComponent(o.replace(/\+/g," "))}catch{return null}}function r(o){try{return encodeURIComponent(o)}catch{return null}}function n(o){for(var a=/([^=?#&]+)=?([^&]*)/g,f={},h;h=a.exec(o);){var u=t(h[1]),d=t(h[2]);u===null||d===null||u in f||(f[u]=d)}return f}function i(o,a){a=a||"";var f=[],h,u;typeof a!="string"&&(a="?");for(u in o)if(s.call(o,u)){if(h=o[u],!h&&(h===null||h===e||isNaN(h))&&(h=""),u=r(u),h=r(h),u===null||h===null)continue;f.push(u+"="+h)}return f.length?a+f.join("&"):""}return $.stringify=i,$.parse=n,$}var Y,it;function sr(){if(it)return Y;it=1;var s=br(),e=wr(),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r=/[\n\r\t]/g,n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/:\d+$/,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/;function f(p){return(p||"").toString().replace(t,"")}var h=[["#","hash"],["?","query"],function(b,c){return m(c.protocol)?b.replace(/\\/g,"/"):b},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function d(p){var b;typeof window<"u"?b=window:typeof y<"u"?b=y:typeof self<"u"?b=self:b={};var c=b.location||{};p=p||c;var v={},_=typeof p,g;if(p.protocol==="blob:")v=new S(unescape(p.pathname),{});else if(_==="string"){v=new S(p,{});for(g in u)delete v[g]}else if(_==="object"){for(g in p)g in u||(v[g]=p[g]);v.slashes===void 0&&(v.slashes=n.test(p.href))}return v}function m(p){return p==="file:"||p==="ftp:"||p==="http:"||p==="https:"||p==="ws:"||p==="wss:"}function x(p,b){p=f(p),p=p.replace(r,""),b=b||{};var c=o.exec(p),v=c[1]?c[1].toLowerCase():"",_=!!c[2],g=!!c[3],l=0,w;return _?g?(w=c[2]+c[3]+c[4],l=c[2].length+c[3].length):(w=c[2]+c[4],l=c[2].length):g?(w=c[3]+c[4],l=c[3].length):w=c[4],v==="file:"?l>=2&&(w=w.slice(2)):m(v)?w=c[4]:v?_&&(w=w.slice(2)):l>=2&&m(b.protocol)&&(w=c[4]),{protocol:v,slashes:_||m(v),slashesCount:l,rest:w}}function T(p,b){if(p==="")return b;for(var c=(b||"/").split("/").slice(0,-1).concat(p.split("/")),v=c.length,_=c[v-1],g=!1,l=0;v--;)c[v]==="."?c.splice(v,1):c[v]===".."?(c.splice(v,1),l++):l&&(v===0&&(g=!0),c.splice(v,1),l--);return g&&c.unshift(""),(_==="."||_==="..")&&c.push(""),c.join("/")}function S(p,b,c){if(p=f(p),p=p.replace(r,""),!(this instanceof S))return new S(p,b,c);var v,_,g,l,w,R,q=h.slice(),j=typeof b,E=this,P=0;for(j!=="object"&&j!=="string"&&(c=b,b=null),c&&typeof c!="function"&&(c=e.parse),b=d(b),_=x(p||"",b),v=!_.protocol&&!_.slashes,E.slashes=_.slashes||v&&b.slashes,E.protocol=_.protocol||b.protocol||"",p=_.rest,(_.protocol==="file:"&&(_.slashesCount!==2||a.test(p))||!_.slashes&&(_.protocol||_.slashesCount<2||!m(E.protocol)))&&(q[3]=[/(.*)/,"pathname"]);P<q.length;P++){if(l=q[P],typeof l=="function"){p=l(p,E);continue}g=l[0],R=l[1],g!==g?E[R]=p:typeof g=="string"?(w=g==="@"?p.lastIndexOf(g):p.indexOf(g),~w&&(typeof l[2]=="number"?(E[R]=p.slice(0,w),p=p.slice(w+l[2])):(E[R]=p.slice(w),p=p.slice(0,w)))):(w=g.exec(p))&&(E[R]=w[1],p=p.slice(0,w.index)),E[R]=E[R]||v&&l[3]&&b[R]||"",l[4]&&(E[R]=E[R].toLowerCase())}c&&(E.query=c(E.query)),v&&b.slashes&&E.pathname.charAt(0)!=="/"&&(E.pathname!==""||b.pathname!=="")&&(E.pathname=T(E.pathname,b.pathname)),E.pathname.charAt(0)!=="/"&&m(E.protocol)&&(E.pathname="/"+E.pathname),s(E.port,E.protocol)||(E.host=E.hostname,E.port=""),E.username=E.password="",E.auth&&(w=E.auth.indexOf(":"),~w?(E.username=E.auth.slice(0,w),E.username=encodeURIComponent(decodeURIComponent(E.username)),E.password=E.auth.slice(w+1),E.password=encodeURIComponent(decodeURIComponent(E.password))):E.username=encodeURIComponent(decodeURIComponent(E.auth)),E.auth=E.password?E.username+":"+E.password:E.username),E.origin=E.protocol!=="file:"&&m(E.protocol)&&E.host?E.protocol+"//"+E.host:"null",E.href=E.toString()}function I(p,b,c){var v=this;switch(p){case"query":typeof b=="string"&&b.length&&(b=(c||e.parse)(b)),v[p]=b;break;case"port":v[p]=b,s(b,v.protocol)?b&&(v.host=v.hostname+":"+b):(v.host=v.hostname,v[p]="");break;case"hostname":v[p]=b,v.port&&(b+=":"+v.port),v.host=b;break;case"host":v[p]=b,i.test(b)?(b=b.split(":"),v.port=b.pop(),v.hostname=b.join(":")):(v.hostname=b,v.port="");break;case"protocol":v.protocol=b.toLowerCase(),v.slashes=!c;break;case"pathname":case"hash":if(b){var _=p==="pathname"?"/":"#";v[p]=b.charAt(0)!==_?_+b:b}else v[p]=b;break;case"username":case"password":v[p]=encodeURIComponent(b);break;case"auth":var g=b.indexOf(":");~g?(v.username=b.slice(0,g),v.username=encodeURIComponent(decodeURIComponent(v.username)),v.password=b.slice(g+1),v.password=encodeURIComponent(decodeURIComponent(v.password))):v.username=encodeURIComponent(decodeURIComponent(b))}for(var l=0;l<h.length;l++){var w=h[l];w[4]&&(v[w[1]]=v[w[1]].toLowerCase())}return v.auth=v.password?v.username+":"+v.password:v.username,v.origin=v.protocol!=="file:"&&m(v.protocol)&&v.host?v.protocol+"//"+v.host:"null",v.href=v.toString(),v}function C(p){(!p||typeof p!="function")&&(p=e.stringify);var b,c=this,v=c.host,_=c.protocol;_&&_.charAt(_.length-1)!==":"&&(_+=":");var g=_+(c.protocol&&c.slashes||m(c.protocol)?"//":"");return c.username?(g+=c.username,c.password&&(g+=":"+c.password),g+="@"):c.password?(g+=":"+c.password,g+="@"):c.protocol!=="file:"&&m(c.protocol)&&!v&&c.pathname!=="/"&&(g+="@"),(v[v.length-1]===":"||i.test(c.hostname)&&!c.port)&&(v+=":"),g+=v+c.pathname,b=typeof c.query=="object"?p(c.query):c.query,b&&(g+=b.charAt(0)!=="?"?"?"+b:b),c.hash&&(g+=c.hash),g}return S.prototype={set:I,toString:C},S.extractProtocol=x,S.location=d,S.trimLeft=f,S.qs=e,Y=S,Y}var ee,ot;function k(){if(ot)return ee;ot=1;var s=sr();return ee={getOrigin:function(e){if(!e)return null;var t=new s(e);if(t.protocol==="file:")return null;var r=t.port;return r||(r=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){var r=this.getOrigin(e)===this.getOrigin(t);return r},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},ee}var F={exports:{}},st;function O(){return st||(st=1,typeof Object.create=="function"?F.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:F.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),F.exports}var te={},re,at;function ar(){if(at)return re;at=1;function s(){this._listeners={}}return s.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];r.indexOf(t)===-1&&(r=r.concat([t])),this._listeners[e]=r},s.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(r){var n=r.indexOf(t);if(n!==-1){r.length>1?this._listeners[e]=r.slice(0,n).concat(r.slice(n+1)):delete this._listeners[e];return}}},s.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,r=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,r),t in this._listeners)for(var n=this._listeners[t],i=0;i<n.length;i++)n[i].apply(this,r)},re=s,re}var ut;function N(){if(ut)return te;ut=1;var s=O(),e=ar();function t(){e.call(this)}return s(t,e),t.prototype.removeAllListeners=function(r){r?delete this._listeners[r]:this._listeners={}},t.prototype.once=function(r,n){var i=this,o=!1;function a(){i.removeListener(r,a),o||(o=!0,n.apply(this,arguments))}this.on(r,a)},t.prototype.emit=function(){var r=arguments[0],n=this._listeners[r];if(n){for(var i=arguments.length,o=new Array(i-1),a=1;a<i;a++)o[a-1]=arguments[a];for(var f=0;f<n.length;f++)n[f].apply(this,o)}},t.prototype.on=t.prototype.addListener=e.prototype.addEventListener,t.prototype.removeListener=e.prototype.removeEventListener,te.EventEmitter=t,te}var G={exports:{}},ct;function Er(){if(ct)return G.exports;ct=1;var s=y.WebSocket||y.MozWebSocket;return s?G.exports=function(t){return new s(t)}:G.exports=void 0,G.exports}var ne,ft;function _r(){if(ft)return ne;ft=1;var s=L(),e=k(),t=O(),r=N().EventEmitter,n=Er(),i=function(){};function o(a,f,h){if(!o.enabled())throw new Error("Transport created when disabled");r.call(this);var u=this,d=e.addPath(a,"/websocket");d.slice(0,5)==="https"?d="wss"+d.slice(5):d="ws"+d.slice(4),this.url=d,this.ws=new n(this.url,[],h),this.ws.onmessage=function(m){i("message event",m.data),u.emit("message",m.data)},this.unloadRef=s.unloadAdd(function(){u.ws.close()}),this.ws.onclose=function(m){i("close event",m.code,m.reason),u.emit("close",m.code,m.reason),u._cleanup()},this.ws.onerror=function(m){u.emit("close",1006,"WebSocket connection broken"),u._cleanup()}}return t(o,r),o.prototype.send=function(a){var f="["+a+"]";this.ws.send(f)},o.prototype.close=function(){var a=this.ws;this._cleanup(),a&&a.close()},o.prototype._cleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=a.onerror=null),s.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},o.enabled=function(){return!!n},o.transportName="websocket",o.roundTrips=2,ne=o,ne}var ie,lt;function xr(){if(lt)return ie;lt=1;var s=O(),e=N().EventEmitter,t=function(){};function r(n,i){e.call(this),this.sendBuffer=[],this.sender=i,this.url=n}return s(r,e),r.prototype.send=function(n){this.sendBuffer.push(n),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){var n=this,i;this.sendStop=function(){n.sendStop=null,clearTimeout(i)},i=setTimeout(function(){n.sendStop=null,n.sendSchedule()},25)},r.prototype.sendSchedule=function(){t("sendSchedule",this.sendBuffer.length);var n=this;if(this.sendBuffer.length>0){var i="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,i,function(o){n.sendStop=null,o?(n.emit("close",o.code||1006,"Sending error: "+o),n.close()):n.sendScheduleWait()}),this.sendBuffer=[]}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},ie=r,ie}var oe,ht;function Rr(){if(ht)return oe;ht=1;var s=O(),e=N().EventEmitter,t=function(){};function r(n,i,o){e.call(this),this.Receiver=n,this.receiveUrl=i,this.AjaxObject=o,this._scheduleReceiver()}return s(r,e),r.prototype._scheduleReceiver=function(){var n=this,i=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);i.on("message",function(o){n.emit("message",o)}),i.once("close",function(o,a){t("close",o,a,n.pollIsClosing),n.poll=i=null,n.pollIsClosing||(a==="network"?n._scheduleReceiver():(n.emit("close",o||1006,a),n.removeAllListeners()))})},r.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},oe=r,oe}var se,dt;function ur(){if(dt)return se;dt=1;var s=O(),e=k(),t=xr(),r=Rr();function n(i,o,a,f,h){var u=e.addPath(i,o),d=this;t.call(this,i,a),this.poll=new r(f,u,h),this.poll.on("message",function(m){d.emit("message",m)}),this.poll.once("close",function(m,x){d.poll=null,d.emit("close",m,x),d.close()})}return s(n,t),n.prototype.close=function(){t.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},se=n,se}var ae,pt;function B(){if(pt)return ae;pt=1;var s=O(),e=k(),t=ur();function r(i){return function(o,a,f){var h={};typeof a=="string"&&(h.headers={"Content-type":"text/plain"});var u=e.addPath(o,"/xhr_send"),d=new i("POST",u,a,h);return d.once("finish",function(m){if(d=null,m!==200&&m!==204)return f(new Error("http status "+m));f()}),function(){d.close(),d=null;var m=new Error("Aborted");m.code=1e3,f(m)}}}function n(i,o,a,f){t.call(this,i,o,r(f),a,f)}return s(n,t),ae=n,ae}var ue,vt;function z(){if(vt)return ue;vt=1;var s=O(),e=N().EventEmitter;function t(r,n){e.call(this);var i=this;this.bufferPosition=0,this.xo=new n("POST",r,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(o,a){i._chunkHandler(o,a),i.xo=null;var f=o===200?"network":"permanent";i.emit("close",null,f),i._cleanup()})}return s(t,e),t.prototype._chunkHandler=function(r,n){if(!(r!==200||!n))for(var i=-1;;this.bufferPosition+=i+1){var o=n.slice(this.bufferPosition);if(i=o.indexOf(`
`),i===-1)break;var a=o.slice(0,i);a&&this.emit("message",a)}},t.prototype._cleanup=function(){this.removeAllListeners()},t.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},ue=t,ue}var ce,mt;function cr(){if(mt)return ce;mt=1;var s=N().EventEmitter,e=O(),t=L(),r=k(),n=y.XMLHttpRequest,i=function(){};function o(h,u,d,m){var x=this;s.call(this),setTimeout(function(){x._start(h,u,d,m)},0)}e(o,s),o.prototype._start=function(h,u,d,m){var x=this;try{this.xhr=new n}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}u=r.addQuery(u,"t="+ +new Date),this.unloadRef=t.unloadAdd(function(){x._cleanup(!0)});try{this.xhr.open(h,u,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i("xhr timeout"),x.emit("finish",0,""),x._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!m||!m.noCredentials)&&o.supportsCORS&&(this.xhr.withCredentials=!0),m&&m.headers)for(var T in m.headers)this.xhr.setRequestHeader(T,m.headers[T]);this.xhr.onreadystatechange=function(){if(x.xhr){var S=x.xhr,I,C;switch(i("readyState",S.readyState),S.readyState){case 3:try{C=S.status,I=S.responseText}catch{}C===1223&&(C=204),C===200&&I&&I.length>0&&x.emit("chunk",C,I);break;case 4:C=S.status,C===1223&&(C=204),(C===12005||C===12029)&&(C=0),i("finish",C,S.responseText),x.emit("finish",C,S.responseText),x._cleanup(!1);break}}};try{x.xhr.send(d)}catch{x.emit("finish",0,""),x._cleanup(!1)}},o.prototype._cleanup=function(h){if(this.xhr){if(this.removeAllListeners(),t.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),h)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},o.prototype.close=function(){this._cleanup(!0)},o.enabled=!!n;var a=["Active"].concat("Object").join("X");!o.enabled&&a in y&&(n=function(){try{return new y[a]("Microsoft.XMLHTTP")}catch{return null}},o.enabled=!!new n);var f=!1;try{f="withCredentials"in new n}catch{}return o.supportsCORS=f,ce=o,ce}var fe,gt;function Q(){if(gt)return fe;gt=1;var s=O(),e=cr();function t(r,n,i,o){e.call(this,r,n,i,o)}return s(t,e),t.enabled=e.enabled&&e.supportsCORS,fe=t,fe}var le,yt;function M(){if(yt)return le;yt=1;var s=O(),e=cr();function t(r,n,i){e.call(this,r,n,i,{noCredentials:!0})}return s(t,e),t.enabled=e.enabled,le=t,le}var he,bt;function D(){return bt||(bt=1,he={isOpera:function(){return y.navigator&&/opera/i.test(y.navigator.userAgent)},isKonqueror:function(){return y.navigator&&/konqueror/i.test(y.navigator.userAgent)},hasDomain:function(){if(!y.document)return!0;try{return!!y.document.domain}catch{return!1}}}),he}var de,wt;function Sr(){if(wt)return de;wt=1;var s=O(),e=B(),t=z(),r=Q(),n=M(),i=D();function o(a){if(!n.enabled&&!r.enabled)throw new Error("Transport created when disabled");e.call(this,a,"/xhr_streaming",t,r)}return s(o,e),o.enabled=function(a){return a.nullOrigin||i.isOpera()?!1:r.enabled},o.transportName="xhr-streaming",o.roundTrips=2,o.needBody=!!y.document,de=o,de}var pe,Et;function Qe(){if(Et)return pe;Et=1;var s=N().EventEmitter,e=O(),t=L(),r=D(),n=k(),i=function(){};function o(a,f,h){var u=this;s.call(this),setTimeout(function(){u._start(a,f,h)},0)}return e(o,s),o.prototype._start=function(a,f,h){var u=this,d=new y.XDomainRequest;f=n.addQuery(f,"t="+ +new Date),d.onerror=function(){u._error()},d.ontimeout=function(){u._error()},d.onprogress=function(){i("progress",d.responseText),u.emit("chunk",200,d.responseText)},d.onload=function(){u.emit("finish",200,d.responseText),u._cleanup(!1)},this.xdr=d,this.unloadRef=t.unloadAdd(function(){u._cleanup(!0)});try{this.xdr.open(a,f),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(h)}catch{this._error()}},o.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},o.prototype._cleanup=function(a){if(this.xdr){if(this.removeAllListeners(),t.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,a)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},o.prototype.close=function(){this._cleanup(!0)},o.enabled=!!(y.XDomainRequest&&r.hasDomain()),pe=o,pe}var ve,_t;function fr(){if(_t)return ve;_t=1;var s=O(),e=B(),t=z(),r=Qe();function n(i){if(!r.enabled)throw new Error("Transport created when disabled");e.call(this,i,"/xhr_streaming",t,r)}return s(n,e),n.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:r.enabled&&i.sameScheme},n.transportName="xdr-streaming",n.roundTrips=2,ve=n,ve}var me,xt;function lr(){return xt||(xt=1,me=y.EventSource),me}var ge,Rt;function qr(){if(Rt)return ge;Rt=1;var s=O(),e=N().EventEmitter,t=lr(),r=function(){};function n(i){e.call(this);var o=this,a=this.es=new t(i);a.onmessage=function(f){r("message",f.data),o.emit("message",decodeURI(f.data))},a.onerror=function(f){r("error",a.readyState);var h=a.readyState!==2?"network":"permanent";o._cleanup(),o._close(h)}}return s(n,e),n.prototype.abort=function(){this._cleanup(),this._close("user")},n.prototype._cleanup=function(){var i=this.es;i&&(i.onmessage=i.onerror=null,i.close(),this.es=null)},n.prototype._close=function(i){var o=this;setTimeout(function(){o.emit("close",null,i),o.removeAllListeners()},200)},ge=n,ge}var ye,St;function qt(){if(St)return ye;St=1;var s=O(),e=B(),t=qr(),r=Q(),n=lr();function i(o){if(!i.enabled())throw new Error("Transport created when disabled");e.call(this,o,"/eventsource",t,r)}return s(i,e),i.enabled=function(){return!!n},i.transportName="eventsource",i.roundTrips=2,ye=i,ye}var be,Ot;function hr(){return Ot||(Ot=1,be="1.6.1"),be}var we={exports:{}},Tt;function W(){return Tt||(Tt=1,(function(s){var e=L(),t=D();s.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){s.exports.WPrefix in y||(y[s.exports.WPrefix]={})},postMessage:function(r,n){y.parent!==y&&y.parent.postMessage(JSON.stringify({windowId:s.exports.currentWindowId,type:r,data:n||""}),"*")},createIframe:function(r,n){var i=y.document.createElement("iframe"),o,a,f=function(){clearTimeout(o);try{i.onload=null}catch{}i.onerror=null},h=function(){i&&(f(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),e.unloadDel(a))},u=function(m){i&&(h(),n(m))},d=function(m,x){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(m,x)}catch{}},0)};return i.src=r,i.style.display="none",i.style.position="absolute",i.onerror=function(){u("onerror")},i.onload=function(){clearTimeout(o),o=setTimeout(function(){u("onload timeout")},2e3)},y.document.body.appendChild(i),o=setTimeout(function(){u("timeout")},15e3),a=e.unloadAdd(h),{post:d,cleanup:h,loaded:f}},createHtmlfile:function(r,n){var i=["Active"].concat("Object").join("X"),o=new y[i]("htmlfile"),a,f,h,u=function(){clearTimeout(a),h.onerror=null},d=function(){o&&(u(),e.unloadDel(f),h.parentNode.removeChild(h),h=o=null,CollectGarbage())},m=function(S){o&&(d(),n(S))},x=function(S,I){try{setTimeout(function(){h&&h.contentWindow&&h.contentWindow.postMessage(S,I)},0)}catch{}};o.open(),o.write('<html><script>document.domain="'+y.document.domain+'";<\/script></html>'),o.close(),o.parentWindow[s.exports.WPrefix]=y[s.exports.WPrefix];var T=o.createElement("div");return o.body.appendChild(T),h=o.createElement("iframe"),T.appendChild(h),h.src=r,h.onerror=function(){m("onerror")},a=setTimeout(function(){m("timeout")},15e3),f=e.unloadAdd(d),{post:x,cleanup:d,loaded:u}}},s.exports.iframeEnabled=!1,y.document&&(s.exports.iframeEnabled=(typeof y.postMessage=="function"||typeof y.postMessage=="object")&&!t.isKonqueror())})(we)),we.exports}var Ee,It;function dr(){if(It)return Ee;It=1;var s=O(),e=N().EventEmitter,t=hr(),r=k(),n=W(),i=L(),o=X(),a=function(){};function f(h,u,d){if(!f.enabled())throw new Error("Transport created when disabled");e.call(this);var m=this;this.origin=r.getOrigin(d),this.baseUrl=d,this.transUrl=u,this.transport=h,this.windowId=o.string(8);var x=r.addPath(d,"/iframe.html")+"#"+this.windowId;this.iframeObj=n.createIframe(x,function(T){m.emit("close",1006,"Unable to load an iframe ("+T+")"),m.close()}),this.onmessageCallback=this._message.bind(this),i.attachEvent("message",this.onmessageCallback)}return s(f,e),f.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){i.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},f.prototype._message=function(h){if(a("message",h.data),!r.isOriginEqual(h.origin,this.origin)){a("not same origin",h.origin,this.origin);return}var u;try{u=JSON.parse(h.data)}catch{a("bad json",h.data);return}if(u.windowId!==this.windowId){a("mismatched window id",u.windowId,this.windowId);return}switch(u.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([t,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",u.data);break;case"c":var d;try{d=JSON.parse(u.data)}catch{a("bad json",u.data);return}this.emit("close",d[0],d[1]),this.close();break}},f.prototype.postMessage=function(h,u){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:h,data:u||""}),this.origin)},f.prototype.send=function(h){this.postMessage("m",h)},f.enabled=function(){return n.iframeEnabled},f.transportName="iframe",f.roundTrips=2,Ee=f,Ee}var _e,Ct;function Ve(){return Ct||(Ct=1,_e={isObject:function(s){var e=typeof s;return e==="function"||e==="object"&&!!s},extend:function(s){if(!this.isObject(s))return s;for(var e,t,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}return s}}),_e}var xe,jt;function Re(){if(jt)return xe;jt=1;var s=O(),e=dr(),t=Ve();return xe=function(r){function n(i,o){e.call(this,r.transportName,i,o)}return s(n,e),n.enabled=function(i,o){if(!y.document)return!1;var a=t.extend({},o);return a.sameOrigin=!0,r.enabled(a)&&e.enabled()},n.transportName="iframe-"+r.transportName,n.needBody=!0,n.roundTrips=e.roundTrips+r.roundTrips-1,n.facadeTransport=r,n},xe}var Se,At;function Or(){if(At)return Se;At=1;var s=O(),e=W(),t=k(),r=N().EventEmitter,n=X(),i=function(){};function o(f){r.call(this);var h=this;e.polluteGlobalNamespace(),this.id="a"+n.string(6),f=t.addQuery(f,"c="+decodeURIComponent(e.WPrefix+"."+this.id)),i("using htmlfile",o.htmlfileEnabled);var u=o.htmlfileEnabled?e.createHtmlfile:e.createIframe;y[e.WPrefix][this.id]={start:function(){h.iframeObj.loaded()},message:function(d){h.emit("message",d)},stop:function(){h._cleanup(),h._close("network")}},this.iframeObj=u(f,function(){h._cleanup(),h._close("permanent")})}s(o,r),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete y[e.WPrefix][this.id]},o.prototype._close=function(f){this.emit("close",null,f),this.removeAllListeners()},o.htmlfileEnabled=!1;var a=["Active"].concat("Object").join("X");if(a in y)try{o.htmlfileEnabled=!!new y[a]("htmlfile")}catch{}return o.enabled=o.htmlfileEnabled||e.iframeEnabled,Se=o,Se}var qe,Nt;function kt(){if(Nt)return qe;Nt=1;var s=O(),e=Or(),t=M(),r=B();function n(i){if(!e.enabled)throw new Error("Transport created when disabled");r.call(this,i,"/htmlfile",e,t)}return s(n,r),n.enabled=function(i){return e.enabled&&i.sameOrigin},n.transportName="htmlfile",n.roundTrips=2,qe=n,qe}var Oe,Pt;function Lt(){if(Pt)return Oe;Pt=1;var s=O(),e=B(),t=z(),r=Q(),n=M();function i(o){if(!n.enabled&&!r.enabled)throw new Error("Transport created when disabled");e.call(this,o,"/xhr",t,r)}return s(i,e),i.enabled=function(o){return o.nullOrigin?!1:n.enabled&&o.sameOrigin?!0:r.enabled},i.transportName="xhr-polling",i.roundTrips=2,Oe=i,Oe}var Te,Ut;function Tr(){if(Ut)return Te;Ut=1;var s=O(),e=B(),t=fr(),r=z(),n=Qe();function i(o){if(!n.enabled)throw new Error("Transport created when disabled");e.call(this,o,"/xhr",r,n)}return s(i,e),i.enabled=t.enabled,i.transportName="xdr-polling",i.roundTrips=2,Te=i,Te}var Ie,Xt;function Ir(){if(Xt)return Ie;Xt=1;var s=W(),e=X(),t=D(),r=k(),n=O(),i=N().EventEmitter,o=function(){};function a(f){var h=this;i.call(this),s.polluteGlobalNamespace(),this.id="a"+e.string(6);var u=r.addQuery(f,"c="+encodeURIComponent(s.WPrefix+"."+this.id));y[s.WPrefix][this.id]=this._callback.bind(this),this._createScript(u),this.timeoutId=setTimeout(function(){h._abort(new Error("JSONP script loaded abnormally (timeout)"))},a.timeout)}return n(a,i),a.prototype.abort=function(){if(y[s.WPrefix][this.id]){var f=new Error("JSONP user aborted read");f.code=1e3,this._abort(f)}},a.timeout=35e3,a.scriptErrorTimeout=1e3,a.prototype._callback=function(f){this._cleanup(),!this.aborting&&(f&&this.emit("message",f),this.emit("close",null,"network"),this.removeAllListeners())},a.prototype._abort=function(f){this._cleanup(),this.aborting=!0,this.emit("close",f.code,f.message),this.removeAllListeners()},a.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var f=this.script;f.parentNode.removeChild(f),f.onreadystatechange=f.onerror=f.onload=f.onclick=null,this.script=null}delete y[s.WPrefix][this.id]},a.prototype._scriptError=function(){var f=this;this.errorTimer||(this.errorTimer=setTimeout(function(){f.loadedOkay||f._abort(new Error("JSONP script loaded abnormally (onerror)"))},a.scriptErrorTimeout))},a.prototype._createScript=function(f){var h=this,u=this.script=y.document.createElement("script"),d;if(u.id="a"+e.string(8),u.src=f,u.type="text/javascript",u.charset="UTF-8",u.onerror=this._scriptError.bind(this),u.onload=function(){h._abort(new Error("JSONP script loaded abnormally (onload)"))},u.onreadystatechange=function(){if(o("onreadystatechange",u.readyState),/loaded|closed/.test(u.readyState)){if(u&&u.htmlFor&&u.onclick){h.loadedOkay=!0;try{u.onclick()}catch{}}u&&h._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof u.async>"u"&&y.document.attachEvent)if(t.isOpera())d=this.script2=y.document.createElement("script"),d.text="try{var a = document.getElementById('"+u.id+"'); if(a)a.onerror();}catch(x){};",u.async=d.async=!1;else{try{u.htmlFor=u.id,u.event="onclick"}catch{}u.async=!0}typeof u.async<"u"&&(u.async=!0);var m=y.document.getElementsByTagName("head")[0];m.insertBefore(u,m.firstChild),d&&m.insertBefore(d,m.firstChild)},Ie=a,Ie}var Ce,Bt;function Cr(){if(Bt)return Ce;Bt=1;var s=X(),e=k(),t=function(){},r,n;function i(a){try{return y.document.createElement('<iframe name="'+a+'">')}catch{var f=y.document.createElement("iframe");return f.name=a,f}}function o(){r=y.document.createElement("form"),r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",n=y.document.createElement("textarea"),n.name="d",r.appendChild(n),y.document.body.appendChild(r)}return Ce=function(a,f,h){r||o();var u="a"+s.string(8);r.target=u,r.action=e.addQuery(e.addPath(a,"/jsonp_send"),"i="+u);var d=i(u);d.id=u,d.style.display="none",r.appendChild(d);try{n.value=f}catch{}r.submit();var m=function(x){d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){d.parentNode.removeChild(d),d=null},500),n.value="",h(x))};return d.onerror=function(){m()},d.onload=function(){m()},d.onreadystatechange=function(x){t("onreadystatechange",u,d.readyState),d.readyState==="complete"&&m()},function(){m(new Error("Aborted"))}},Ce}var je,Mt;function jr(){if(Mt)return je;Mt=1;var s=O(),e=ur(),t=Ir(),r=Cr();function n(i){if(!n.enabled())throw new Error("Transport created when disabled");e.call(this,i,"/jsonp",r,t)}return s(n,e),n.enabled=function(){return!!y.document},n.transportName="jsonp-polling",n.roundTrips=1,n.needBody=!0,je=n,je}var Ae,Dt;function Ar(){return Dt||(Dt=1,Ae=[_r(),Sr(),fr(),qt(),Re()(qt()),kt(),Re()(kt()),Lt(),Tr(),Re()(Lt()),jr()]),Ae}var Wt={},Ht;function Nr(){if(Ht)return Wt;Ht=1;var s=Array.prototype,e=Object.prototype,t=Function.prototype,r=String.prototype,n=s.slice,i=e.toString,o=function(g){return e.toString.call(g)==="[object Function]"},a=function(l){return i.call(l)==="[object Array]"},f=function(l){return i.call(l)==="[object String]"},h=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),u;h?u=function(g,l,w,R){!R&&l in g||Object.defineProperty(g,l,{configurable:!0,enumerable:!1,writable:!0,value:w})}:u=function(g,l,w,R){!R&&l in g||(g[l]=w)};var d=function(g,l,w){for(var R in l)e.hasOwnProperty.call(l,R)&&u(g,R,l[R],w)},m=function(g){if(g==null)throw new TypeError("can't convert "+g+" to object");return Object(g)};function x(g){var l=+g;return l!==l?l=0:l!==0&&l!==1/0&&l!==-1/0&&(l=(l>0||-1)*Math.floor(Math.abs(l))),l}function T(g){return g>>>0}function S(){}d(t,{bind:function(l){var w=this;if(!o(w))throw new TypeError("Function.prototype.bind called on incompatible "+w);for(var R=n.call(arguments,1),q=function(){if(this instanceof A){var U=w.apply(this,R.concat(n.call(arguments)));return Object(U)===U?U:this}else return w.apply(l,R.concat(n.call(arguments)))},j=Math.max(0,w.length-R.length),E=[],P=0;P<j;P++)E.push("$"+P);var A=Function("binder","return function ("+E.join(",")+"){ return binder.apply(this, arguments); }")(q);return w.prototype&&(S.prototype=w.prototype,A.prototype=new S,S.prototype=null),A}}),d(Array,{isArray:a});var I=Object("a"),C=I[0]!=="a"||!(0 in I),p=function(l){var w=!0,R=!0;return l&&(l.call("foo",function(q,j,E){typeof E!="object"&&(w=!1)}),l.call([1],function(){R=typeof this=="string"},"x")),!!l&&w&&R};d(s,{forEach:function(l){var w=m(this),R=C&&f(this)?this.split(""):w,q=arguments[1],j=-1,E=R.length>>>0;if(!o(l))throw new TypeError;for(;++j<E;)j in R&&l.call(q,R[j],j,w)}},!p(s.forEach));var b=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;d(s,{indexOf:function(l){var w=C&&f(this)?this.split(""):m(this),R=w.length>>>0;if(!R)return-1;var q=0;for(arguments.length>1&&(q=x(arguments[1])),q=q>=0?q:Math.max(0,R+q);q<R;q++)if(q in w&&w[q]===l)return q;return-1}},b);var c=r.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var g=/()??/.exec("")[1]===void 0;r.split=function(l,w){var R=this;if(l===void 0&&w===0)return[];if(i.call(l)!=="[object RegExp]")return c.call(this,l,w);var q=[],j=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.extended?"x":"")+(l.sticky?"y":""),E=0,P,A,U,Ke;for(l=new RegExp(l.source,j+"g"),R+="",g||(P=new RegExp("^"+l.source+"$(?!\\s)",j)),w=w===void 0?-1>>>0:T(w);(A=l.exec(R))&&(U=A.index+A[0].length,!(U>E&&(q.push(R.slice(E,A.index)),!g&&A.length>1&&A[0].replace(P,function(){for(var H=1;H<arguments.length-2;H++)arguments[H]===void 0&&(A[H]=void 0)}),A.length>1&&A.index<R.length&&s.push.apply(q,A.slice(1)),Ke=A[0].length,E=U,q.length>=w)));)l.lastIndex===A.index&&l.lastIndex++;return E===R.length?(Ke||!l.test(""))&&q.push(""):q.push(R.slice(E)),q.length>w?q.slice(0,w):q}})():"0".split(void 0,0).length&&(r.split=function(l,w){return l===void 0&&w===0?[]:c.call(this,l,w)});var v=r.substr,_="".substr&&"0b".substr(-1)!=="b";return d(r,{substr:function(l,w){return v.call(this,l<0&&(l=this.length+l)<0?0:l,w)}},_),Wt}var Ne,Jt;function kr(){if(Jt)return Ne;Jt=1;var s=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,e,t=function(r){var n,i={},o=[];for(n=0;n<65536;n++)o.push(String.fromCharCode(n));return r.lastIndex=0,o.join("").replace(r,function(a){return i[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),r.lastIndex=0,i};return Ne={quote:function(r){var n=JSON.stringify(r);return s.lastIndex=0,s.test(n)?(e||(e=t(s)),n.replace(s,function(i){return e[i]})):n}},Ne}var ke,$t;function Pr(){if($t)return ke;$t=1;var s=function(){};return ke=function(e){return{filterToEnabled:function(t,r){var n={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(i){if(i&&!(i.transportName==="websocket"&&r.websocket===!1)){if(t.length&&t.indexOf(i.transportName)===-1){s("not in whitelist",i.transportName);return}i.enabled(r)?(s("enabled",i.transportName),n.main.push(i),i.facadeTransport&&n.facade.push(i.facadeTransport)):s("disabled",i.transportName)}}),n}}},ke}var Pe,Ft;function Lr(){if(Ft)return Pe;Ft=1;var s={};return["log","debug","warn"].forEach(function(e){var t;try{t=y.console&&y.console[e]&&y.console[e].apply}catch{}s[e]=t?function(){return y.console[e].apply(y.console,arguments)}:e==="log"?function(){}:s.log}),Pe=s,Pe}var Le,Gt;function Ze(){if(Gt)return Le;Gt=1;function s(e){this.type=e}return s.prototype.initEvent=function(e,t,r){return this.type=e,this.bubbles=t,this.cancelable=r,this.timeStamp=+new Date,this},s.prototype.stopPropagation=function(){},s.prototype.preventDefault=function(){},s.CAPTURING_PHASE=1,s.AT_TARGET=2,s.BUBBLING_PHASE=3,Le=s,Le}var Ue,zt;function pr(){return zt||(zt=1,Ue=y.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),Ue}var Xe,Qt;function Ur(){if(Qt)return Xe;Qt=1;var s=O(),e=Ze();function t(){e.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return s(t,e),Xe=t,Xe}var Be,Vt;function Xr(){if(Vt)return Be;Vt=1;var s=O(),e=Ze();function t(r){e.call(this),this.initEvent("message",!1,!1),this.data=r}return s(t,e),Be=t,Be}var Me,Zt;function Br(){if(Zt)return Me;Zt=1;var s=N().EventEmitter,e=O();function t(){var r=this;s.call(this),this.to=setTimeout(function(){r.emit("finish",200,"{}")},t.timeout)}return e(t,s),t.prototype.close=function(){clearTimeout(this.to)},t.timeout=2e3,Me=t,Me}var De,Kt;function vr(){if(Kt)return De;Kt=1;var s=N().EventEmitter,e=O(),t=Ve();function r(n,i){s.call(this);var o=this,a=+new Date;this.xo=new i("GET",n),this.xo.once("finish",function(f,h){var u,d;if(f===200){if(d=+new Date-a,h)try{u=JSON.parse(h)}catch{}t.isObject(u)||(u={})}o.emit("finish",u,d),o.removeAllListeners()})}return e(r,s),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},De=r,De}var We,Yt;function mr(){if(Yt)return We;Yt=1;var s=O(),e=N().EventEmitter,t=M(),r=vr();function n(i){var o=this;e.call(this),this.ir=new r(i,t),this.ir.once("finish",function(a,f){o.ir=null,o.emit("message",JSON.stringify([a,f]))})}return s(n,e),n.transportName="iframe-info-receiver",n.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},We=n,We}var He,er;function Mr(){if(er)return He;er=1;var s=N().EventEmitter,e=O(),t=L(),r=dr(),n=mr();function i(o,a){var f=this;s.call(this);var h=function(){var u=f.ifr=new r(n.transportName,a,o);u.once("message",function(d){if(d){var m;try{m=JSON.parse(d)}catch{f.emit("finish"),f.close();return}var x=m[0],T=m[1];f.emit("finish",x,T)}f.close()}),u.once("close",function(){f.emit("finish"),f.close()})};y.document.body?h():t.attachEvent("load",h)}return e(i,s),i.enabled=function(){return r.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},He=i,He}var Je,tr;function Dr(){if(tr)return Je;tr=1;var s=N().EventEmitter,e=O(),t=k(),r=Qe(),n=Q(),i=M(),o=Br(),a=Mr(),f=vr();function h(u,d){var m=this;s.call(this),setTimeout(function(){m.doXhr(u,d)},0)}return e(h,s),h._getReceiver=function(u,d,m){return m.sameOrigin?new f(d,i):n.enabled?new f(d,n):r.enabled&&m.sameScheme?new f(d,r):a.enabled()?new a(u,d):new f(d,o)},h.prototype.doXhr=function(u,d){var m=this,x=t.addPath(u,"/info");this.xo=h._getReceiver(u,x,d),this.timeoutRef=setTimeout(function(){m._cleanup(!1),m.emit("finish")},h.timeout),this.xo.once("finish",function(T,S){m._cleanup(!0),m.emit("finish",T,S)})},h.prototype._cleanup=function(u){clearTimeout(this.timeoutRef),this.timeoutRef=null,!u&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,Je=h,Je}var $e,rr;function Wr(){if(rr)return $e;rr=1;var s=W();function e(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}return e.prototype._transportClose=function(t,r){s.postMessage("c",JSON.stringify([t,r]))},e.prototype._transportMessage=function(t){s.postMessage("t",t)},e.prototype._send=function(t){this._transport.send(t)},e.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},$e=e,$e}var Fe,nr;function Hr(){if(nr)return Fe;nr=1;var s=k(),e=L(),t=Wr(),r=mr(),n=W(),i=pr(),o=function(){};return Fe=function(a,f){var h={};f.forEach(function(d){d.facadeTransport&&(h[d.facadeTransport.transportName]=d.facadeTransport)}),h[r.transportName]=r;var u;a.bootstrap_iframe=function(){var d;n.currentWindowId=i.hash.slice(1);var m=function(x){if(x.source===parent&&(typeof u>"u"&&(u=x.origin),x.origin===u)){var T;try{T=JSON.parse(x.data)}catch{o("bad json",x.data);return}if(T.windowId===n.currentWindowId)switch(T.type){case"s":var S;try{S=JSON.parse(T.data)}catch{o("bad json",T.data);break}var I=S[0],C=S[1],p=S[2],b=S[3];if(I!==a.version)throw new Error('Incompatible SockJS! Main site uses: "'+I+'", the iframe: "'+a.version+'".');if(!s.isOriginEqual(p,i.href)||!s.isOriginEqual(b,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+p+", "+b+")");d=new t(new h[C](p,b));break;case"m":d._send(T.data);break;case"c":d&&d._close(),d=null;break}}};e.attachEvent("message",m),n.postMessage("s")}},Fe}var Ge,ir;function Jr(){if(ir)return Ge;ir=1,Nr();var s=sr(),e=O(),t=X(),r=kr(),n=k(),i=L(),o=Pr(),a=Ve(),f=D(),h=Lr(),u=Ze(),d=ar(),m=pr(),x=Ur(),T=Xr(),S=Dr(),I=function(){},C;function p(c,v,_){if(!(this instanceof p))return new p(c,v,_);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");d.call(this),this.readyState=p.CONNECTING,this.extensions="",this.protocol="",_=_||{},_.protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=_.transports,this._transportOptions=_.transportOptions||{},this._timeout=_.timeout||0;var g=_.sessionId||8;if(typeof g=="function")this._generateSessionId=g;else if(typeof g=="number")this._generateSessionId=function(){return t.string(g)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=_.server||t.numberString(1e3);var l=new s(c);if(!l.host||!l.protocol)throw new SyntaxError("The URL '"+c+"' is invalid");if(l.hash)throw new SyntaxError("The URL must not contain a fragment");if(l.protocol!=="http:"&&l.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+l.protocol+"' is not allowed.");var w=l.protocol==="https:";if(m.protocol==="https:"&&!w&&!n.isLoopbackAddr(l.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");v?Array.isArray(v)||(v=[v]):v=[];var R=v.sort();R.forEach(function(j,E){if(!j)throw new SyntaxError("The protocols entry '"+j+"' is invalid.");if(E<R.length-1&&j===R[E+1])throw new SyntaxError("The protocols entry '"+j+"' is duplicated.")});var q=n.getOrigin(m.href);this._origin=q?q.toLowerCase():null,l.set("pathname",l.pathname.replace(/\/+$/,"")),this.url=l.href,I("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:n.isOriginEqual(this.url,m.href),sameScheme:n.isSchemeEqual(this.url,m.href)},this._ir=new S(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}e(p,d);function b(c){return c===1e3||c>=3e3&&c<=4999}return p.prototype.close=function(c,v){if(c&&!b(c))throw new Error("InvalidAccessError: Invalid code");if(v&&v.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===p.CLOSING||this.readyState===p.CLOSED)){var _=!0;this._close(c||1e3,v||"Normal closure",_)}},p.prototype.send=function(c){if(typeof c!="string"&&(c=""+c),this.readyState===p.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===p.OPEN&&this._transport.send(r.quote(c))},p.version=hr(),p.CONNECTING=0,p.OPEN=1,p.CLOSING=2,p.CLOSED=3,p.prototype._receiveInfo=function(c,v){if(this._ir=null,!c){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(v),this._transUrl=c.base_url?c.base_url:this.url,c=a.extend(c,this._urlInfo);var _=C.filterToEnabled(this._transportsWhitelist,c);this._transports=_.main,I(this._transports.length+" enabled transports"),this._connect()},p.prototype._connect=function(){for(var c=this._transports.shift();c;c=this._transports.shift()){if(I("attempt",c.transportName),c.needBody&&(!y.document.body||typeof y.document.readyState<"u"&&y.document.readyState!=="complete"&&y.document.readyState!=="interactive")){this._transports.unshift(c),i.attachEvent("load",this._connect.bind(this));return}var v=Math.max(this._timeout,this._rto*c.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),v);var _=n.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),g=this._transportOptions[c.transportName],l=new c(_,this._transUrl,g);l.on("message",this._transportMessage.bind(this)),l.once("close",this._transportClose.bind(this)),l.transportName=c.transportName,this._transport=l;return}this._close(2e3,"All transports failed",!1)},p.prototype._transportTimeout=function(){this.readyState===p.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},p.prototype._transportMessage=function(c){var v=this,_=c.slice(0,1),g=c.slice(1),l;switch(_){case"o":this._open();return;case"h":this.dispatchEvent(new u("heartbeat")),I("heartbeat",this.transport);return}if(g)try{l=JSON.parse(g)}catch{}if(!(typeof l>"u"))switch(_){case"a":Array.isArray(l)&&l.forEach(function(w){I("message",v.transport),v.dispatchEvent(new T(w))});break;case"m":I("message",this.transport),this.dispatchEvent(new T(l));break;case"c":Array.isArray(l)&&l.length===2&&this._close(l[0],l[1],!0);break}},p.prototype._transportClose=function(c,v){if(I("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!b(c)&&c!==2e3&&this.readyState===p.CONNECTING){this._connect();return}this._close(c,v)},p.prototype._open=function(){I("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===p.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=p.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new u("open")),I("connected",this.transport)):this._close(1006,"Server lost session")},p.prototype._close=function(c,v,_){I("_close",this.transport,c,v,_,this.readyState);var g=!1;if(this._ir&&(g=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===p.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=p.CLOSING,setTimeout((function(){this.readyState=p.CLOSED,g&&this.dispatchEvent(new u("error"));var l=new x("close");l.wasClean=_||!1,l.code=c||1e3,l.reason=v,this.dispatchEvent(l),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},p.prototype.countRTO=function(c){return c>100?4*c:300+c},Ge=function(c){return C=o(c),Hr()(p,c),p},Ge}var ze,or;function $r(){if(or)return ze;or=1;var s=Ar();return ze=Jr()(s),"_sockjs_onload"in y&&setTimeout(y._sockjs_onload,1),ze}var Fr=$r();const Gr=gr(Fr),zr=Object.freeze(Object.defineProperty({__proto__:null,default:Gr},Symbol.toStringTag,{value:"Module"}));export{zr as e};
